document.getElementById("btnApagar").onclick = () => {
    const confirmDelete = confirm("Tem certeza que deseja apagar a tarefa?");
    if (confirmDelete) {
        const tarefaId = detalhes.id;

        fetch(`${URI}/${tarefaId}`, {
            method: "DELETE"
        })
            .then(response => {
                if (!response.ok) throw new Error("Erro ao apagar tarefa");

                alert("Tarefa apagada com sucesso!");

                // Fecha o popup
                document.getElementById("popupDetalhes").classList.add("overlay-hidden");
                document.body.style.overflow = "auto";

                // Remove o card visualmente do Kanban
                const card = document.querySelector(`[data-tarefa-id="${tarefaId}"]`);
                if (card) {
                    card.remove();
                } else {
                    console.warn("Card visual nÃ£o encontrado para remover.");
                }

            })
            .catch(error => {
                alert("Erro ao apagar tarefa: " + error.message);
            });
    }
};